# Entrega 3 - Power BI

## Execu√ß√£o da Medi√ß√£o

### Objetivo
Desenvolver dashboard interativo no **Power BI** para visualiza√ß√£o e an√°lise dos dados de atrasos de voos, permitindo explora√ß√£o din√¢mica e gera√ß√£o de insights de neg√≥cio.

### Arquitetura de Conex√£o

```
PostgreSQL (silver.airline_delays)
        ‚Üì
    Power BI Desktop
        ‚Üì
    Dashboard Interativo
        ‚Üì
    Power BI Service (Publica√ß√£o)
```

### Configura√ß√£o de Conex√£o

#### 1. Conex√£o ao PostgreSQL

**Credenciais:**
- **Host:** localhost (ou IP do container Docker)
- **Porta:** 5432
- **Database:** airline_delays
- **Schema:** silver
- **Tabela:** airline_delays
- **Usu√°rio:** postgres
- **Senha:** postgres

**String de Conex√£o:**
```
Server=localhost;Database=airline_delays;UID=postgres;PWD=postgres
```

#### 2. Importa√ß√£o de Dados

**Modo recomendado:** Import (para melhor performance)
**Alternativa:** DirectQuery (para dados em tempo real)

**Query SQL:**
```sql
SELECT 
    year, month,
    carrier, carrier_name,
    airport, airport_name,
    arr_flights, arr_del15,
    carrier_ct, weather_ct, nas_ct, security_ct, late_aircraft_ct,
    arr_cancelled, arr_diverted,
    arr_delay, carrier_delay, weather_delay, nas_delay, security_delay, late_aircraft_delay
FROM silver.airline_delays
ORDER BY year, month, carrier, airport
```

### Estrutura do Dashboard

#### P√°gina 1: Vis√£o Geral (Overview)
**KPIs Principais:**
- üìä Total de Voos
- ‚è±Ô∏è Atraso M√©dio (minutos)
- üö´ Taxa de Cancelamento (%)
- ‚úàÔ∏è Taxa de Pontualidade (%)

**Visualiza√ß√µes:**
1. **Card de M√©tricas** - KPIs principais
2. **Gr√°fico de Linha** - Tend√™ncia temporal de atrasos
3. **Mapa** - Distribui√ß√£o geogr√°fica por aeroporto
4. **Gr√°fico de Barras** - Top 10 aeroportos com mais atrasos

**Filtros:**
- Seletor de ano
- Seletor de m√™s
- Seletor de companhia a√©rea

#### P√°gina 2: An√°lise por Companhia A√©rea
**Visualiza√ß√µes:**
1. **Tabela** - Ranking de companhias por performance
2. **Gr√°fico de Barras Horizontais** - Atraso m√©dio por companhia
3. **Gr√°fico de Dispers√£o** - Rela√ß√£o entre volume de voos e atrasos
4. **Treemap** - Participa√ß√£o de mercado

**M√©tricas:**
- Volume de voos por companhia
- Atraso m√©dio por companhia
- Taxa de cancelamento por companhia
- Evolu√ß√£o temporal

#### P√°gina 3: Causas de Atrasos
**Visualiza√ß√µes:**
1. **Gr√°fico de Pizza** - Distribui√ß√£o das causas de atraso
2. **Gr√°fico de Barras Empilhadas** - Causas por m√™s
3. **Gr√°fico de √Årea** - Evolu√ß√£o temporal das causas
4. **Matriz** - Causas √ó Companhias

**Categorias:**
- üè¢ Companhia A√©rea (carrier_delay)
- üå¶Ô∏è Meteorologia (weather_delay)
- üõ´ NAS - Sistema Nacional (nas_delay)
- üîí Seguran√ßa (security_delay)
- ‚úàÔ∏è Aeronave Atrasada (late_aircraft_delay)

#### P√°gina 4: An√°lise Temporal e Sazonalidade
**Visualiza√ß√µes:**
1. **Gr√°fico de Linhas M√∫ltiplas** - Compara√ß√£o ano a ano
2. **Heatmap Calend√°rio** - Atrasos por dia/m√™s
3. **Gr√°fico de Barras** - Sazonalidade mensal
4. **Decomposi√ß√£o** - Tend√™ncia, sazonalidade, res√≠duo

**Insights:**
- Meses com mais atrasos
- Padr√µes sazonais
- Tend√™ncias de longo prazo

#### P√°gina 5: An√°lise por Aeroporto
**Visualiza√ß√µes:**
1. **Tabela Interativa** - Detalhes por aeroporto
2. **Mapa Interativo** - Localiza√ß√£o e tamanho por volume
3. **Gr√°fico de Barras** - Top/Bottom aeroportos
4. **Cart√µes** - Estat√≠sticas do aeroporto selecionado

**Filtros Din√¢micos:**
- Busca de aeroporto
- Filtro por regi√£o/estado
- Filtro por volume de opera√ß√µes

### Medidas DAX Criadas

```dax
-- Taxa de Atraso
Taxa de Atraso = 
DIVIDE(
    SUM(airline_delays[arr_del15]),
    SUM(airline_delays[arr_flights]),
    0
) * 100

-- Atraso M√©dio
Atraso M√©dio = 
DIVIDE(
    SUM(airline_delays[arr_delay]),
    SUM(airline_delays[arr_flights]),
    0
)

-- Taxa de Pontualidade
Taxa de Pontualidade = 100 - [Taxa de Atraso]

-- Taxa de Cancelamento
Taxa de Cancelamento = 
DIVIDE(
    SUM(airline_delays[arr_cancelled]),
    SUM(airline_delays[arr_flights]),
    0
) * 100

-- Total de Voos
Total de Voos = SUM(airline_delays[arr_flights])

-- Causa Principal
Causa Principal = 
VAR MaxDelay = 
    MAX(
        airline_delays[carrier_delay],
        airline_delays[weather_delay],
        airline_delays[nas_delay],
        airline_delays[security_delay],
        airline_delays[late_aircraft_delay]
    )
RETURN
    SWITCH(
        TRUE(),
        MaxDelay = airline_delays[carrier_delay], "Companhia",
        MaxDelay = airline_delays[weather_delay], "Meteorologia",
        MaxDelay = airline_delays[nas_delay], "NAS",
        MaxDelay = airline_delays[security_delay], "Seguran√ßa",
        MaxDelay = airline_delays[late_aircraft_delay], "Aeronave Atrasada",
        "N/A"
    )

-- Ranking de Companhias
Rank Companhia = 
RANKX(
    ALL(airline_delays[carrier_name]),
    [Atraso M√©dio],
    ,
    DESC,
    DENSE
)
```

### Tabelas Calculadas

```dax
-- Calend√°rio
Calend√°rio = 
CALENDAR(
    DATE(MIN(airline_delays[year]), 1, 1),
    DATE(MAX(airline_delays[year]), 12, 31)
)

-- Dimens√£o de Causas
Dim_Causas = 
DATATABLE(
    "Causa", STRING,
    "Cor", STRING,
    {
        {"Companhia", "#FF6B6B"},
        {"Meteorologia", "#4ECDC4"},
        {"NAS", "#45B7D1"},
        {"Seguran√ßa", "#FFA07A"},
        {"Aeronave Atrasada", "#98D8C8"}
    }
)
```

### Formata√ß√£o e Design

**Tema de Cores:**
- Prim√°ria: Azul Avia√ß√£o (#0078D4)
- Secund√°ria: Cinza Escuro (#424242)
- Destaque: Laranja (#FF8C00)
- Sucesso: Verde (#28A745)
- Alerta: Vermelho (#DC3545)

**Fontes:**
- T√≠tulos: Segoe UI Bold, 18pt
- Subt√≠tulos: Segoe UI Semibold, 14pt
- Texto: Segoe UI, 11pt

**Layout:**
- Grid 12 colunas
- Espa√ßamento consistente
- Navega√ß√£o por bot√µes
- Tooltips informativos

### Interatividade

**Recursos Implementados:**
- ‚úÖ Cross-filtering entre visuais
- ‚úÖ Drill-down em hierarquias (Ano ‚Üí M√™s ‚Üí Dia)
- ‚úÖ Tooltips personalizados com m√©tricas adicionais
- ‚úÖ Bot√µes de navega√ß√£o entre p√°ginas
- ‚úÖ Bookmark para cen√°rios salvos
- ‚úÖ Filtros sincronizados entre p√°ginas

### Performance e Otimiza√ß√£o

**T√©cnicas Aplicadas:**
1. **Agrega√ß√µes** - Pr√©-c√°lculo de somas e m√©dias
2. **Relacionamentos Otimizados** - Star schema
3. **Medidas Eficientes** - DAX otimizado
4. **Redu√ß√£o de Cardinalidade** - Filtros aplicados na importa√ß√£o
5. **Visualiza√ß√µes Leves** - Limita√ß√£o de pontos de dados

### Publica√ß√£o

**Power BI Service:**
1. Publicar no workspace
2. Configurar gateway (se necess√°rio)
3. Agendar refresh autom√°tico
4. Compartilhar com stakeholders
5. Configurar permiss√µes

**Refresh Schedule:**
- Frequ√™ncia: Di√°ria
- Hor√°rio: 06:00 AM
- Fuso hor√°rio: America/Sao_Paulo

### Documenta√ß√£o do Dashboard

**Manual do Usu√°rio:**
1. Como navegar entre p√°ginas
2. Como usar filtros
3. Interpreta√ß√£o de m√©tricas
4. Gloss√°rio de termos

**Guia de Manuten√ß√£o:**
1. Como atualizar dados
2. Como modificar medidas
3. Como adicionar novas visualiza√ß√µes
4. Troubleshooting comum

### M√©tricas de Sucesso

- ‚úÖ Dashboard carrega em < 5 segundos
- ‚úÖ Todas as visualiza√ß√µes s√£o interativas
- ‚úÖ Dados atualizados automaticamente
- ‚úÖ Mobile-friendly (responsive)
- ‚úÖ Acess√≠vel a todos os stakeholders

### Pr√≥ximos Passos

1. üì± Vers√£o mobile otimizada
2. ü§ñ Integra√ß√£o com Q&A (IA do Power BI)
3. üìä An√°lise preditiva (forecasting)
4. üîî Alertas autom√°ticos por email
5. üåê Embed em portal corporativo

### Links √öteis

- **Dashboard**: [Link ser√° adicionado ap√≥s publica√ß√£o]
- **Documenta√ß√£o Power BI**: [Microsoft Learn](https://learn.microsoft.com/power-bi/)
- **Reposit√≥rio**: [GitHub](https://github.com/FelipeFreire-gf/SBD2-Austin-Airbnb)
